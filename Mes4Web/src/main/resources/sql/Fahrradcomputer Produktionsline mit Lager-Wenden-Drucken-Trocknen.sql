-- Smart Production Linie mit 4 Maschinen
DROP DATABASE MES;

CREATE DATABASE IF NOT EXISTS MES;

CREATE TABLE IF NOT EXISTS MES.MACHINES (
    MACHINE_ID SMALLINT(5) UNSIGNED NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    NAME_PARA1 VARCHAR(45),
    NAME_PARA2 VARCHAR(45),
    PRIMARY KEY (MACHINE_ID)
);

CREATE TABLE IF NOT EXISTS MES.VARIANTS (
    VARIANT_ID SMALLINT(5) UNSIGNED NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    PRIMARY KEY (VARIANT_ID)
);

CREATE TABLE IF NOT EXISTS MES.PRODUCTION_STEPS (
    PRODUCTION_STEP_ID SMALLINT(5) UNSIGNED NOT NULL,
    STEP_NO SMALLINT(5) UNSIGNED NOT NULL,
    VARIANT_ID SMALLINT(5) UNSIGNED NOT NULL,
    MACHINE_ID SMALLINT(5) UNSIGNED NOT NULL,
    PARA1 SMALLINT(5),
    PARA2 SMALLINT(5),
    PRIMARY KEY (PRODUCTION_STEP_ID)
);

CREATE TABLE IF NOT EXISTS MES.PRODUCTS (
    PRODUCT_ID SMALLINT(5) UNSIGNED NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    PRIMARY KEY (PRODUCT_ID)
);

CREATE TABLE IF NOT EXISTS MES.COLORS (
    COLOR_ID SMALLINT(5) UNSIGNED NOT NULL,
    WEB_COLOR VARCHAR(7) NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    PRIMARY KEY (COLOR_ID)
);

CREATE TABLE IF NOT EXISTS MES.CUSTOMERS (
    CUSTOMER_ID SMALLINT(5) UNSIGNED NOT NULL,
    NAME VARCHAR(45) NOT NULL,
    CONTACT VARCHAR(45) NOT NULL,
    STREET VARCHAR(45) NOT NULL,
    ZIP VARCHAR(45) NOT NULL,
    CITY VARCHAR(45) NOT NULL,
    PRIMARY KEY (CUSTOMER_ID)
);

CREATE TABLE IF NOT EXISTS MES.PARTS (
    PART_ID SMALLINT(5) UNSIGNED NOT NULL,
    RFID SMALLINT(5),
    COLOR_ID SMALLINT(5) UNSIGNED NOT NULL,
    PART_STATE SMALLINT(5),
    PRIMARY KEY (PART_ID)
);

CREATE TABLE IF NOT EXISTS MES.STOCKYARDS (
    STOCKYARD_ID SMALLINT(5) UNSIGNED NOT NULL,
    PART_ID SMALLINT(5),
    PRIMARY KEY (STOCKYARD_ID)
);

CREATE TABLE IF NOT EXISTS MES.ORDERS (
    ORDER_ID SMALLINT(5) UNSIGNED NOT NULL,
    PRODUCT_ID SMALLINT(5) UNSIGNED NOT NULL,
    COLOR_ID  SMALLINT(5) UNSIGNED NOT NULL,
    VARIANT_ID SMALLINT(5) UNSIGNED NOT NULL,
    CUSTOMER_ID SMALLINT(5) UNSIGNED NOT NULL,
    ORDER_STATE SMALLINT(5),
    PART_ID SMALLINT(5) UNSIGNED,
    PRIMARY KEY (ORDER_ID)
);

CREATE TABLE IF NOT EXISTS MES.PROD_DATA (
    LOG_TIME TIMESTAMP NOT NULL,
    LOG_TYPE SMALLINT(5),
    RFID SMALLINT(5),
    MACHINE SMALLINT(5),
    DURATION BIGINT UNSIGNED,
    MESSAGE VARCHAR(160) NOT NULL
);

INSERT INTO MES.MACHINES (MACHINE_ID, NAME, NAME_PARA1, NAME_PARA2) VALUES (1, 'Lager', 'Lagerplatz', '');
INSERT INTO MES.MACHINES (MACHINE_ID, NAME, NAME_PARA1, NAME_PARA2) VALUES (2, 'Wenden', '', '');
INSERT INTO MES.MACHINES (MACHINE_ID, NAME, NAME_PARA1, NAME_PARA2) VALUES (3, 'Drucker', 'Layout', '');
INSERT INTO MES.MACHINES (MACHINE_ID, NAME, NAME_PARA1, NAME_PARA2) VALUES (4, 'Ofen', 'Temperatur', 'Trockenzeit');

INSERT INTO MES.COLORS (COLOR_ID, WEB_COLOR, NAME) VALUES (1, '#00FFFF', 'blau');
INSERT INTO MES.COLORS (COLOR_ID, WEB_COLOR, NAME) VALUES (2, '#FF0000', 'rot');
INSERT INTO MES.COLORS (COLOR_ID, WEB_COLOR, NAME) VALUES (3, '#FFFF00', 'gelb');

INSERT INTO MES.PARTS (PART_ID, RFID, COLOR_ID, PART_STATE) VALUES (1, 51, 1, 0);
INSERT INTO MES.PARTS (PART_ID, RFID, COLOR_ID, PART_STATE) VALUES (2, 52, 2, 0);
INSERT INTO MES.PARTS (PART_ID, RFID, COLOR_ID, PART_STATE) VALUES (3, 53, 3, 0);
INSERT INTO MES.PARTS (PART_ID, RFID, COLOR_ID, PART_STATE) VALUES (4, 54, 3, 0);
INSERT INTO MES.PARTS (PART_ID, RFID, COLOR_ID, PART_STATE) VALUES (5, 55, 3, 0);

INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (1, 1);
INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (2, 2);
INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (3, 0);
INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (4, 3);
INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (5, 0);
INSERT INTO MES.STOCKYARDS (STOCKYARD_ID, PART_ID) VALUES (6, 0);

INSERT INTO MES.PRODUCTS (PRODUCT_ID, NAME) VALUES (1, 'Fahrradcomputer');

INSERT INTO MES.CUSTOMERS (CUSTOMER_ID, NAME, CONTACT, STREET, ZIP, CITY) VALUES (1, 'Ostseerad e. K.', 'Simon Fischer', 'Am Stadtwald 15', '17389', 'Anklam');
INSERT INTO MES.CUSTOMERS (CUSTOMER_ID, NAME, CONTACT, STREET, ZIP, CITY) VALUES (2, 'Rädleland e. K. ', 'Levi Schiller', 'Hambacher Straße 59', '70825 ', 'Stuttgart');
INSERT INTO MES.CUSTOMERS (CUSTOMER_ID, NAME, CONTACT, STREET, ZIP, CITY) VALUES (3, 'Bavaria Bikes', 'Karin Klinger', 'Rappenweg 23', '92275', 'München');
INSERT INTO MES.CUSTOMERS (CUSTOMER_ID, NAME, CONTACT, STREET, ZIP, CITY) VALUES (4, 'Neckarad GmbH', 'Senad Yalzin', 'Blumenthalstraße 87', '69115', 'Heidelberg');

INSERT INTO MES.VARIANTS (VARIANT_ID, NAME) VALUES (1, 'bedrucken mit Motiv 1');
INSERT INTO MES.VARIANTS (VARIANT_ID, NAME) VALUES (2, 'bedrucken mit Motiv 2');
INSERT INTO MES.VARIANTS (VARIANT_ID, NAME) VALUES (3, 'Rückseite bedrucken mit Motiv 1');

INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (1, 1, 1, 1, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (2, 2, 1, 3, 1, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (3, 3, 1, 4, 35, 10);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (4, 4, 1, 1, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (5, 1, 2, 1, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (6, 2, 2, 3, 2, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (7, 3, 2, 4, 45, 15);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (8, 4, 2, 1, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES  (9, 1, 3, 1, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (10, 2, 3, 2, NULL, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (11, 3, 3, 3, 1, NULL);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (12, 4, 3, 4, 35, 10);
INSERT INTO MES.PRODUCTION_STEPS (PRODUCTION_STEP_ID, STEP_NO, VARIANT_ID, MACHINE_ID, PARA1, PARA2) VALUES (13, 5, 3, 1, NULL, NULL);

INSERT INTO MES.ORDERS (ORDER_ID, PRODUCT_ID, COLOR_ID, VARIANT_ID, CUSTOMER_ID, ORDER_STATE, PART_ID) VALUES (4711, 1, 2, 1, 3, 0, NULL);
INSERT INTO MES.ORDERS (ORDER_ID, PRODUCT_ID, COLOR_ID, VARIANT_ID, CUSTOMER_ID, ORDER_STATE, PART_ID) VALUES (4712, 1, 3, 2, 1, 1, 3);
INSERT INTO MES.ORDERS (ORDER_ID, PRODUCT_ID, COLOR_ID, VARIANT_ID, CUSTOMER_ID, ORDER_STATE, PART_ID) VALUES (4713, 1, 3, 3, 2, 0, NULL);
INSERT INTO MES.ORDERS (ORDER_ID, PRODUCT_ID, COLOR_ID, VARIANT_ID, CUSTOMER_ID, ORDER_STATE, PART_ID) VALUES (4714, 1, 2, 1, 3, 2, NULL);